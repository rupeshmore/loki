
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Getting started Â· Loki</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    
        <link rel="stylesheet" href="gitbook/style.css">
    

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="website-1500466793198.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    
        <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    

    
    <link rel="next" href="configuration.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
    <div class="book-logo">
        
        <a href="https://github.com/oblador/loki/">
        
        
        <img src="logo.svg"/>
        
        
        </a>
        
    </div>
    
    
        <nav role="navigation">
        


<ul class="summary">
    
    

    

    
        
        
    
        
        <li class="chapter 
              "
            data-level="1.1" 
            data-path="./">

            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        
        <li class="chapter 
            active  selected  "
            data-level="1.2" 
            data-path="getting-started.html">

            
                <a href="getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        
        <li class="chapter 
              "
            data-level="1.3" 
            data-path="configuration.html">

            
                <a href="configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        
        <li class="chapter 
              "
            data-level="1.4" 
            data-path="command-line-arguments.html">

            
                <a href="command-line-arguments.html">
            
                    
                    Command line arguments
            
                </a>
            

            
            <ul class="articles">
                
                
    
        
        <li class="chapter 
               hide "
            data-level="1.4.1" 
            data-path="command-line-arguments.html">

            
                <a href="command-line-arguments.html#loki-test">
            
                    
                    loki test
            
                </a>
            

            
        </li>
    
        
        <li class="chapter 
               hide "
            data-level="1.4.2" 
            data-path="command-line-arguments.html">

            
                <a href="command-line-arguments.html#loki-update">
            
                    
                    loki update
            
                </a>
            

            
        </li>
    
        
        <li class="chapter 
               hide "
            data-level="1.4.3" 
            data-path="command-line-arguments.html">

            
                <a href="command-line-arguments.html#loki-approve">
            
                    
                    loki approve
            
                </a>
            

            
        </li>
    
        
        <li class="chapter 
               hide "
            data-level="1.4.4" 
            data-path="command-line-arguments.html">

            
                <a href="command-line-arguments.html#loki-init">
            
                    
                    loki init
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
</ul>


        </nav>
    

    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Getting started</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="getting-started">Getting started</h1>
<h2 id="prerequsites">Prerequsites</h2>
<ul>
<li>Node 7.6 or higher</li>
</ul>
<h3 id="optional-dependencies">Optional dependencies</h3>
<ul>
<li><a href="http://www.graphicsmagick.org" target="_blank">GraphicsMagick</a> for gm diffing engine, <code>brew install graphicsmagick</code></li>
<li><a href="https://www.docker.com/community-edition#/download" target="_blank">Docker</a> for the <code>chrome.docker</code> target.</li>
<li><a href="https://www.google.se/chrome/browser/desktop/" target="_blank">Chrome 59+</a> for the <code>chrome.app</code> target, <code>brew cask install google-chrome-canary</code>. </li>
</ul>
<h2 id="installation">Installation</h2>
<pre class="language-"><code>yarn add loki --dev
yarn loki init
</code></pre><h2 id="running-your-first-tests">Running your first tests</h2>
<h3 id="1-review-configuration">1. Review configuration</h3>
<p>The <code>loki init</code> command will detect what type of project it is and add default configurations to your <code>package.json</code> file under the key <code>loki</code>. For web this is testing laptop and iPhone configurations using local Chrome app. You can change this at any time. </p>
<h3 id="2-start-storybook">2. Start Storybook</h3>
<p>For loki to be able to access your stories you must start the storybook server. Usually this will be done with <code>yarn storybook</code>. You can run React and React Native storybook servers and tests simultaneously as long as they run on different ports. If you test against iOS simulator or Android emulator, these must also be running the storybook app, start them with <code>react-native run-ios</code> and <code>react-native run-android</code> respectively.</p>
<h3 id="3-create-reference-images">3. Create reference images</h3>
<p>If it&apos;s your first time using loki you need to create the reference images to test your stories against. This is done with <code>yarn loki update</code> which by default will create a <code>loki</code> folder to store them in. These images should be checked into your git repository, optionally stored using <a href="https://git-lfs.github.com" target="_blank"><code>git-lfs</code></a>. </p>
<h3 id="4-make-changes">4. Make changes</h3>
<p>Now it&apos;s time to make some changes to your stories or the underlying components that we want to catch with loki!</p>
<h3 id="5-run-tests">5. Run tests</h3>
<p>Run loki again but this time in test mode with <code>yarn loki test</code>. You can test a subset of your configurations with a regular expression in the second argument. <code>yarn loki test laptop</code> will run any configuration containing the word <code>laptop</code>, therefore it&apos;s useful to add keywords such as platform (chrome, ios, android) to your configuration names. </p>
<h3 id="6-review-changes">6. Review changes</h3>
<p>Loki will create screenshots of all the tested stories in the <code>loki/current</code> folder in addition to a visual diff placed in the <code>loki/difference</code> folder. You can also use a specialized diffing tool such as <a href="https://www.kaleidoscopeapp.com" target="_blank">Kaleidoscope</a>. Make sure the changes are correct before you continue. </p>
<h3 id="7-approve-changes">7. Approve changes</h3>
<p>If the changes were as you inteded, it&apos;s time to update the reference files. The test command should output a suggested command to use that will only update the failed tests. Otherwise just use the approve command; <code>yarn loki approve</code>. Commit your changes along with the new reference images and repeat.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="configuration.html" class="navigation navigation-next " aria-label="Next page: Configuration">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Getting started","level":"1.2","depth":1,"next":{"title":"Configuration","level":"1.3","depth":1,"path":"configuration.md","ref":"configuration.md","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","theme-gestalt","-theme-default","prism","-highlight","anchorjs","github","styles-sass-fix"],"root":"docs","styles":{"website":"website-1500466793198.css"},"pluginsConfig":{"prism":{},"styles-sass-fix":{},"github":{"url":"https://github.com/oblador/loki/"},"theme-gestalt":{"showLevel":false,"styles":{"website":"styles/website.css"},"logo":"logo.svg","favicon":"favicon.png","excludeDefaultStyles":false},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/oblador/loki/tree/master"},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Loki","gitbook":"3.2.2"},"file":{"path":"getting-started.md","mtime":"2017-07-15T09:27:32.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-07-19T12:19:52.464Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

